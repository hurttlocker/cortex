{
  "id": "openclaw-cortex",
  "kind": "extension",
  "uiHints": {
    "binaryPath": {
      "label": "Cortex Binary Path",
      "placeholder": "~/bin/cortex",
      "help": "Path to the cortex binary. Defaults to ~/bin/cortex or cortex in PATH."
    },
    "dbPath": {
      "label": "Database Path",
      "placeholder": "~/.cortex/cortex.db",
      "help": "Path to Cortex SQLite database.",
      "advanced": true
    },
    "embedProvider": {
      "label": "Embedding Provider",
      "placeholder": "ollama/nomic-embed-text",
      "help": "Embedding model for semantic/hybrid search. Format: provider/model (e.g., ollama/nomic-embed-text)."
    },
    "searchMode": {
      "label": "Search Mode",
      "placeholder": "hybrid",
      "help": "Default search mode: hybrid (recommended), bm25, or semantic."
    },
    "autoCapture": {
      "label": "Auto-Capture",
      "help": "Automatically capture conversation exchanges into Cortex with fact extraction."
    },
    "autoRecall": {
      "label": "Auto-Recall",
      "help": "Automatically inject relevant Cortex memories into context before each AI turn."
    },
    "recallLimit": {
      "label": "Recall Limit",
      "placeholder": "3",
      "help": "Maximum memories to inject per turn.",
      "advanced": true
    },
    "minScore": {
      "label": "Minimum Score",
      "placeholder": "0.3",
      "help": "Minimum search score for auto-recall results.",
      "advanced": true
    },
    "captureMaxChars": {
      "label": "Capture Max Chars",
      "placeholder": "2000",
      "help": "Maximum message length eligible for auto-capture.",
      "advanced": true
    },
    "extractFacts": {
      "label": "Extract Facts",
      "help": "Run fact extraction on captured memories (recommended)."
    },
    "capture.dedupe.enabled": {
      "label": "Capture Dedupe Enabled",
      "help": "Suppress near-duplicate auto-captures using cosine similarity on recent captures.",
      "advanced": true
    },
    "capture.similarityThreshold": {
      "label": "Capture Similarity Threshold",
      "placeholder": "0.95",
      "help": "Cosine similarity cutoff for near-duplicate suppression (0-1).",
      "advanced": true
    },
    "capture.dedupeWindowSec": {
      "label": "Capture Dedupe Window (sec)",
      "placeholder": "300",
      "help": "Lookback window for dedupe comparison.",
      "advanced": true
    },
    "capture.coalesceWindowSec": {
      "label": "Capture Coalesce Window (sec)",
      "placeholder": "20",
      "help": "Merge rapid-fire short captures inside this time window.",
      "advanced": true
    },
    "capture.minCaptureChars": {
      "label": "Capture Min Chars",
      "placeholder": "20",
      "help": "Skip very short captures below this length unless marked important.",
      "advanced": true
    },
    "recallDedupe.enabled": {
      "label": "Recall Dedupe Enabled",
      "help": "Deduplicate exact/near-duplicate memories before injecting recall context.",
      "advanced": true
    },
    "recallDedupe.similarityThreshold": {
      "label": "Recall Dedupe Similarity Threshold",
      "placeholder": "0.98",
      "help": "Cosine similarity cutoff for near-duplicate recall suppression.",
      "advanced": true
    }
  },
  "configSchema": {
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "binaryPath": { "type": "string" },
      "dbPath": { "type": "string" },
      "embedProvider": { "type": "string" },
      "searchMode": {
        "type": "string",
        "enum": ["hybrid", "bm25", "semantic"]
      },
      "autoCapture": { "type": "boolean" },
      "autoRecall": { "type": "boolean" },
      "recallLimit": { "type": "number", "minimum": 1, "maximum": 10 },
      "minScore": { "type": "number", "minimum": 0, "maximum": 1 },
      "captureMaxChars": { "type": "number", "minimum": 100, "maximum": 10000 },
      "extractFacts": { "type": "boolean" },
      "capture": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "dedupe": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "enabled": { "type": "boolean" }
            }
          },
          "similarityThreshold": { "type": "number", "minimum": 0, "maximum": 1 },
          "dedupeWindowSec": { "type": "number", "minimum": 1, "maximum": 86400 },
          "coalesceWindowSec": { "type": "number", "minimum": 0, "maximum": 3600 },
          "shortCaptureMaxChars": { "type": "number", "minimum": 50, "maximum": 5000 },
          "minCaptureChars": { "type": "number", "minimum": 1, "maximum": 5000 },
          "lowSignalPatterns": {
            "type": "array",
            "items": { "type": "string" }
          }
        }
      },
      "recallDedupe": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "enabled": { "type": "boolean" },
          "similarityThreshold": { "type": "number", "minimum": 0, "maximum": 1 }
        }
      }
    }
  }
}
